# 20장 strict mode

## strict mode란?

### 암묵적 전역 함수

이 코드에서는 전역 스코프에 x변수의 선언이 존재하지 않기 때문에 ReferenceError를 발생시킬 것 같지만 자바스크립트 엔진은 암묵적으로 전역 객체에 x 프로퍼티를 동적 생성한다.
이때 전역 객체 x프로퍼티는 마치 전역 변수처럼 사용할 수 있다. 이러한 현상을 **암묵적 전역**이라 한다.

```
function foo() {
  x = 10;
}
foo();

console.log(x); // ?
```

개발자의 의도와는 상관없이 발생한 암묵적 전역은 오류를 발생시키기 때문에 let, const 키워드를 사용하는게 좋다.

다시 돌아와서, 자바스크립트에서는 잠재적인 오류에 대한 근본적인 해결을 위해 strict mode(엄격 모드)라는 자바스크립트 언어의 문법을 엄격히 적용하여 문제를 일으킬 수 있는 코드에 대해 명식적인 에러를 발생시킨다.

## strict mode의 적용

전역 선두 또는 함수 몸체의 선두에 **'use strict'**를 명시하여 적용할 수 있다. 그러나 즉시 실행 함수에서만 사용하는 것이 좋다.

```
'use strict';
```

## 매개변수 이름의 중복

중복된 매개변수 이름을 사용하면 SyntaxError가 발생한다.

```
(function () {
  'use strict';

  //SyntaxError: Duplicate parameter name not allowed in this context
  function foo(x, x) {
    return x + x;
  }
  console.log(foo(1, 2));
}());
```

## with 문의 사용

with문을 사용하면 SyntaxError가 발생하고, 가독성이 나빠지는 문제가 있기 때문에 with문은 사용하지 않는 것이 좋다.

```
(function () {
  'use strict';

  // SyntaxError: Strict mode code may not include a with statement
  with({ x: 1 }) {
    console.log(x);
  }
}());
```

## strict mode 적용에 의한 변화

### 일반 함수에서 this

생성자 함수가 아닌 일반 함수 내부에서는 this를 사용할 필요가 없기 때문에 strict mode에서는 일반 함수로서 호출하면 this에 undefined가 바인딩된다.

```
(function () {
    'use strict';

    function foo() {
        console.log(this); // undefined
    }
    foo();

    function Foo() {
         .log(this); // Foo
    }
    new Foo();
}());
```

### with 문의 사용

strict mode에서는 매개변수에 전달된 인수를 재할당하여 변경해도 arguments 객체에 반영되지 않는다.

```
(function (a) {
  'use strict';
  // 매개변수에 전달된 인수를 재할당하여 변경
  a = 2;

  // 변경된 인수가 arguments 객체에 반영되지 않는다.
  console.log(arguments); // { 0: 1, length: 1 }
}(1));
```
