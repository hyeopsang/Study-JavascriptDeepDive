# 22ì¥. this
## ğŸ“ this í‚¤ì›Œë“œ
- `this`ëŠ” **ìì‹ ì´ ì†í•œ ê°ì²´ ë˜ëŠ” ìì‹ ì´ ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¤ëŠ” ìê¸° ì°¸ì¡° ë³€ìˆ˜**ì„.
- `this`ëŠ” JSì—”ì§„ì— ì˜í•´ ì•”ë¬µì ìœ¼ë¡œ ìƒì„±ë˜ë©°, ì½”ë“œ ì–´ë””ì„œë“  ì°¸ì¡°ê°€ ê°€ëŠ¥. í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê²Œ ë˜ë©´ `arguments ê°ì²´`ì™€ `this`ê°€ ì•”ë¬µì ìœ¼ë¡œ í•¨ìˆ˜ ë‚´ë¶€ì— ì „ë‹¬ë¨.
- `this`ê°€ ê°€ë¦¬í‚¤ëŠ” ê°’(`this` ë°”ì¸ë”©)ì€ **í•¨ìˆ˜ í˜¸ì¶œ ë°©ì‹ì— ì˜í•´ ë™ì ìœ¼ë¡œ ê²°ì •**ë¨.
  ```js
  // ìƒì„±ì í•¨ìˆ˜
  function Circle(radius) {
    // thisëŠ” ìƒì„±ì í•¨ìˆ˜ê°€ ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚´
    this.radius = radius;
  }
  
  Circle.prototype.getDiameter = function () {
    // thisëŠ” ìƒì„±ì í•¨ìˆ˜ê°€ ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚´
    return 2 * this.radius;
  }
  
  // ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
  const circle = new Circle(5);
  console.log(circle.getDiameter());  // 10
  ```

<br/>

## ğŸ“ í•¨ìˆ˜ í˜¸ì¶œ ë°©ì‹ê³¼ this ë°”ì¸ë”©
```js
// this ë°”ì¸ë”©ì€ í•¨ìˆ˜ í˜¸ì¶œ ë°©ì‹ì— ë”°ë¼ ë™ì ìœ¼ë¡œ ê²°ì •ë¨
const foo = function () {
  console.dir(this);
};

// 1. ì¼ë°˜ í•¨ìˆ˜ í˜¸ì¶œ
foo();  // window

// 2. ë©”ì„œë“œ í˜¸ì¶œ
const obj = { foo };
obj.foo();  // obj

// 3. ìƒì„±ì í•¨ìˆ˜ í˜¸ì¶œ
new foo();  // foo {}
```
### ì¼ë°˜ í•¨ìˆ˜ í˜¸ì¶œ
- ê¸°ë³¸ì ìœ¼ë¡œ `this`ì—ëŠ” ì „ì—­ ê°ì²´ê°€ ë°”ì¸ë”© ë¨.
  ```js
  function foo() {
    console.log("foo's this: ", this);  // window
    
    function bar() {
      console.log("bar's this: ", this);  // window
    }
    bar();
  }
  foo();
  ```
- `strict mode`ê°€ ì ìš©ëœ ì¼ë°˜ í•¨ìˆ˜ ë‚´ë¶€ì˜ `this`ì—ëŠ” `undefined`ê°€ ë°”ì¸ë”©ë¨.
  ```js
  function foo() {
    'use strict';
    
    console.log("foo's this: ", this);  // undefined
    
    function bar() {
      console.log("bar's this: ", this);  // undefined
    }
    bar();
  }
  foo();
  ```
- ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œëœ ëª¨ë“  í•¨ìˆ˜(ì¤‘ì²© í•¨ìˆ˜, ì½œë°± í•¨ìˆ˜ í¬í•¨) ë‚´ë¶€ì˜ `this`ì—ëŠ” ì „ì—­ ê°ì²´ê°€ ë°”ì¸ë”© ë¨.
  ```js
  var value = 1;
  
  const obj = {
    value: 100,
    foo() {
      console.log("foo's this: ", this);  // {value: 100, foo: â¨}
      // ì½œë°± í•¨ìˆ˜ ë‚´ë¶€ì˜ thisì—ëŠ” ì „ì—­ ê°ì²´ê°€ ë°”ì¸ë”© ë¨
      setTimeout(function () {
        console.log("callback's this: ", this);  // window
        console.log("callback's this.value", this.value);  // 1
      }, 100);
    }
  };
  
  obj.foo();
  ```
- í™”ì‚´í‘œ í•¨ìˆ˜ ë‚´ë¶€ì˜ thisëŠ” ìƒìœ„ ìŠ¤ì½”í”„ì˜ thisë¥¼ ê°€ë¦¬í‚´
  ```js
  var value = 1;
  
  const obj = {
    value: 100,
    foo() {
      // í™”ì‚´í‘œ í•¨ìˆ˜ ë‚´ë¶€ì˜ thisëŠ” ìƒìœ„ ìŠ¤ì½”í”„ì˜ thisë¥¼ ê°€ë¦¬í‚´
      setTimeout(() => console.log(this.value), 100);  // 100
    }
  };
  ```
### ë©”ì„œë“œ í˜¸ì¶œ
- ë©”ì„œë“œ ë‚´ë¶€ì˜ `this`ëŠ” ë©”ì„œë“œë¥¼ ì†Œìœ í•œ ê°ì²´ê°€ ì•„ë‹Œ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ê°ì²´ì— ë°”ì¸ë”© ë¨.
  ```js
  const person = {
    name: 'Lee',
    getName() {
      // ë©”ì„œë“œ ë‚´ë¶€ì˜ thisëŠ” ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ê°ì²´ì— ë°”ì¸ë”©ë¨
      return this.name;
    }
  };
  
  // ë©”ì„œë“œ getNameì„ í˜¸ì¶œí•œ ê°ì²´ëŠ” personì„
  console.log(person.getName());  // Lee
  
  const anotherPerson = {
    name: 'Kim'
  };
  
  // getName ë©”ì„œë“œë¥¼ anotherPerson ê°ì²´ì˜ ë©”ì„œë“œë¡œ í• ë‹¹
  anotherPerson.getName = person.getName;
  
  // getName ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ê°ì²´ëŠ” anotherPerson
  console.log(anotherPerson.getName());  // Kim
  
  // getName ë©”ì„œë“œë¥¼ ë³€ìˆ˜ì— í• ë‹¹
  const getName = person.getName;
  
  // getName ë©”ì„œë“œë¥¼ ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œ
  console.log(getName());  // ''
  ```
- í”„ë¡œí† íƒ€ì… ë©”ì„œë“œ ë‚´ë¶€ì—ì„œ ì‚¬ìš©ëœ `this`ë„ ì¼ë°˜ ë©”ì„œë“œì™€ ë§ˆì°¬ê°€ì§€ë¡œ í•´ë‹¹ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ê°ì²´ì— ë°”ì¸ë”© ë¨.
  ```js
  function Person(name) {
    this.name = name;
  }
  
  Person.prototype.getName = function () {
    return this.name;
  };
  
  const me = new Person('Lee');
  
  // getName ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ê°ì²´ëŠ” me
  console.log(me.getName());  // Lee
  
  Person.prototype.name = 'Kim';
  
  // getName ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ê°ì²´ëŠ” Person.prototype
  console.log(Person.prototype.getName());  // Kim
  ```
### ìƒì„±ì¥ í•¨ìˆ˜ í˜¸ì¶œ
- ìƒì„±ì í•¨ìˆ˜ ë‚´ë¶€ì˜ `this`ì—ëŠ” ìƒì„±ì í•¨ìˆ˜ê°€ ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤ê°€ ë°”ì¸ë”©ë¨.
  ```js
  // ìƒì„±ì í•¨ìˆ˜
  function Circle(radius) {
    // ìƒì„±ì í•¨ìˆ˜ ë‚´ë¶€ì˜ thisëŠ” ìƒì„±ì í•¨ìˆ˜ê°€ ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚´
    this.radius = radius;
    this.getDiameter = function () {
      return 2 * this.radius;
    };
  }
  
  // ë°˜ì§€ë¦„ 5ì¸ Circle ê°ì²´ë¥¼ ìƒì„±
  const circle1 = new Circle(5);
  // ë°˜ì§€ë¦„ 10ì¸ Circle ê°ì²´ë¥¼ ìƒì„±
  const circle2 = new Circle(10);
  
  console.log(circle1.getDiameter());  // 10
  console.log(circle2.getDiameter());  // 20
  ```
### Function.prototype.apply/call/bind ë©”ì„œë“œì— ì˜í•œ ê°„ì ‘ í˜¸ì¶œ
- `apply`, `call`, `bind` ë©”ì„œë“œëŠ” `Function.prototype`ì˜ ë©”ì„œë“œì„.(ëª¨ë“  í•¨ìˆ˜ê°€ ìƒì†ë°›ì•„ ì‚¬ìš© ê°€ëŠ¥)
  ```js
  const user = { name: "í˜„ì„" };
  
  function greet(greeting, punctuation) {
    // ì›ë˜ë¼ë©´ thisëŠ” ì „ì—­ ê°ì²´(window)ê² ì§€ë§Œ, call/apply/bindë¡œ userë¥¼ ê°€ë¦¬í‚¤ê²Œ í•¨
    console.log(`${greeting}, ${this.name}${punctuation}`);
  }
  
  // 1. call ì‚¬ìš© (ì¸ìˆ˜ë¥¼ ì‰¼í‘œë¡œ ë‚˜ì—´í•˜ì—¬ ì¦‰ì‹œ ì‹¤í–‰)
  greet.call(user, "ì•ˆë…•í•˜ì„¸ìš”", "!"); 
  // ì¶œë ¥: "ì•ˆë…•í•˜ì„¸ìš”, í˜„ì„!"
  
  // 2. apply ì‚¬ìš© (ì¸ìˆ˜ë¥¼ ë°°ì—´ë¡œ ë¬¶ì–´ ì „ë‹¬í•˜ë©° ì¦‰ì‹œ ì‹¤í–‰)
  greet.apply(user, ["ë°˜ê°‘ìŠµë‹ˆë‹¤", "!!"]); 
  // ì¶œë ¥: "ë°˜ê°‘ìŠµë‹ˆë‹¤, í˜„ì„!!"
  
  // 3. bind ì‚¬ìš© (thisê°€ ë°”ì¸ë”©ëœ 'ìƒˆë¡œìš´ í•¨ìˆ˜'ë¥¼ ë°˜í™˜, ì¦‰ì‹œ ì‹¤í–‰ X)
  const boundGreet = greet.bind(user); 
  
  // ì›í•˜ëŠ” ì‹œì ì— í˜¸ì¶œ (ì¸ìˆ˜ëŠ” ì´ë•Œ ì „ë‹¬í•˜ê±°ë‚˜, bind ì‹œ ë¯¸ë¦¬ ì „ë‹¬ ê°€ëŠ¥)
  boundGreet("ì–´ì„œì˜¤ì„¸ìš”", "..."); 
  // ì¶œë ¥: "ì–´ì„œì˜¤ì„¸ìš”, í˜„ì„..."
  ```
