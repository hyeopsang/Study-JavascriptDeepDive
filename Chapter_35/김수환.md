# 35장 스프레드 문법

스프레드 문법(`...`)은 하나로 뭉쳐 있는 여러 값들을 개별적인 값으로 펼치는 문법이다. 대상은 이터러블에 한정된다.

```javascript
console.log(...[1, 2, 3]); // 1 2 3
```

스프레드 문법의 결과는 값이 아니므로 변수에 할당할 수 없다. 다음 세 가지 문맥에서만 사용할 수 있다.

1. 함수 호출문의 인수 목록
2. 배열 리터럴의 요소 목록
3. 객체 리터럴의 프로퍼티 목록

## 35.1 함수 호출문의 인수 목록에서 사용하는 경우

```javascript
const arr = [1, 2, 3];

// 배열을 그대로 전달하면 NaN
const max1 = Math.max(arr);    // NaN

// 스프레드 문법으로 개별 값으로 펼쳐서 전달
const max2 = Math.max(...arr); // 3
```

> **Rest 파라미터와의 차이**
> - **스프레드**: 이터러블을 개별적인 값으로 **펼친다** (`[1,2,3]` → `1, 2, 3`)
> - **Rest 파라미터**: 나머지 인수들을 **배열로 모은다** (`1, 2, 3` → `[1, 2, 3]`)

## 35.2 배열 리터럴 내부에서 사용하는 경우

### 35.2.1 concat

ES5에서는 배열을 결합할 때 `concat` 메서드를 사용했다.

```javascript
// ES5
var arr = [1, 2].concat([3, 4]);
console.log(arr); // [1, 2, 3, 4]

// ES6 스프레드 문법
const arr = [...[1, 2], ...[3, 4]];
console.log(arr); // [1, 2, 3, 4]
```

### 35.2.2 splice

ES5에서 배열 중간에 다른 배열의 요소를 삽입할 때 `splice`의 세 번째 인수로 배열을 전달하면 배열 자체가 삽입되는 문제가 있었다.

```javascript
// ES5 - 의도와 다른 결과
var arr1 = [1, 4];
var arr2 = [2, 3];
arr1.splice(1, 0, arr2);
console.log(arr1); // [1, [2, 3], 4] ← 배열이 중첩됨

// ES6 스프레드 문법
const arr1 = [1, 4];
const arr2 = [2, 3];
arr1.splice(1, 0, ...arr2);
console.log(arr1); // [1, 2, 3, 4]
```

### 35.2.3 배열 복사

ES5에서는 배열을 복사할 때 `slice` 메서드를 사용했다.

```javascript
// ES5
var origin = [1, 2];
var copy = origin.slice();
console.log(copy); // [1, 2]

// ES6 스프레드 문법
const origin = [1, 2];
const copy = [...origin];
console.log(copy); // [1, 2]
```

스프레드 문법과 `slice` 모두 **얕은 복사**를 수행한다.

### 35.2.4 이터러블을 배열로 변환

스프레드 문법을 사용하면 이터러블을 배열로 간편하게 변환할 수 있다.

```javascript
function sum() {
  // 이터러블이면서 유사 배열 객체인 arguments를 배열로 변환
  return [...arguments].reduce((pre, cur) => pre + cur, 0);
}
console.log(sum(1, 2, 3)); // 6
```

이터러블이 아닌 유사 배열 객체를 배열로 변환하려면 `Array.from` 메서드를 사용한다.

```javascript
const arrayLike = { 0: "a", 1: "b", length: 2 };
const array = Array.from(arrayLike); // ["a", "b"]
```

## 35.3 객체 리터럴 내부에서 사용하는 경우

스프레드 문법은 원래 이터러블 전용이지만, 객체 리터럴 안에서는 일반 객체에도 사용할 수 있도록 예외가 허용된다(스프레드 프로퍼티 제안).

```javascript
const obj = { a: 1, b: 2 };

// 배열 문맥에서는 일반 객체에 스프레드 불가
// const arr = [...obj]; // TypeError: obj is not iterable

// 객체 리터럴 문맥에서는 일반 객체에 스프레드 가능
const newObj = { ...obj, c: 3 };
console.log(newObj); // { a: 1, b: 2, c: 3 }
```

Object.assign 메서드를 대체할 수 있다.

```javascript
// ES5 - Object.assign으로 객체 병합
const merged = Object.assign({}, { a: 1 }, { b: 2 });
console.log(merged); // { a: 1, b: 2 }

// ES6 스프레드 프로퍼티
const merged2 = { ...{ a: 1 }, ...{ b: 2 } };
console.log(merged2); // { a: 1, b: 2 }
```
